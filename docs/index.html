<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 29.0.4">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font:small Helvetica Neue,sans-serif,Droid Sans Fallback;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
		
		
<title>EPUB 3.3 Tests</title>
		
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
code{color:#c63501}
th code{color:inherit}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
a[href].self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
:is(h2,h3,h4,h5,h6)+a.self-link{border:none;color:inherit;position:relative;top:-2.75em;left:-1.4em;margin-bottom:-2em;display:block;font-size:100%}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";opacity:.5;text-decoration:none;line-height:1.2em;vertical-align:middle}
@media (max-width:767px){
dd{margin-left:0}
:is(h2,h3,h4,h5,h6)+a.self-link{left:101%}
}
@media print{
.removeOnSave{display:none}
}
</style>
		
<link rel="stylesheet" href="css/tables.css">
		
	
<meta name="description" content="Description of the EPUB 3.3 tests.">
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "group": "epub",
  "wgPublicList": "public-epub3",
  "specStatus": "base",
  "noRecTrack": true,
  "publishDate": "2022-02-02",
  "shortName": "epub-tests",
  "edDraftURI": "https://w3c.github.io/epub-tests/results/",
  "copyrightStart": "2021",
  "editors": [
    {
      "name": "Ivan Herman",
      "url": "https://www.w3.org/People/Ivan/",
      "company": "W3C",
      "w3cid": 7382,
      "orcid": "https://orcid.org/0000-0003-0782-2704",
      "companyURL": "https://www.w3.org"
    },
    {
      "name": "Dan Lazin",
      "company": "Google LLC",
      "w3cid": 130027,
      "companyURL": "https://www.google.com"
    }
  ],
  "processVersion": 2020,
  "includePermalinks": true,
  "permalinkEdge": true,
  "permalinkHide": false,
  "diffTool": "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
  "github": {
    "repoURL": "https://github.com/w3c/epub-tests",
    "branch": "main"
  },
  "publishISODate": "2022-02-02T00:00:00.000Z",
  "generatedSubtitle": " 02 February 2022"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/base.css"></head>
	<body class="h-entry informative"><div class="head">
     <h1 id="title" class="title">EPUB 3.3 Tests</h1>
    
    <p id="w3c-state"> <time class="dt-published" datetime="2022-02-02">02 February 2022</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        
        <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/epub-tests/results/">https://w3c.github.io/epub-tests/results/</a></dd>
        <dt>History:</dt><dd>
        <a href="https://github.com/w3c/epub-tests/commits/main">Commit history</a>
      </dd>
        
        
        
        
        
        <dt>Editors:</dt>
        <dd class="editor p-author h-card vcard" data-editor-id="7382">
    <a class="u-url url p-name fn" href="https://www.w3.org/People/Ivan/">Ivan Herman</a><a class="p-name orcid" href="https://orcid.org/0000-0003-0782-2704"><svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
  <style>

    .st1 {
      fill: #fff;
    }
  
</style>
  <path d="M256 128c0 70.7-57.3 128-128 128S0 198.7 0 128 57.3 0 128 0s128 57.3 128 128z" fill="#a6ce39"></path>
  <path class="st1" d="M86.3 186.2H70.9V79.1h15.4v107.1zM108.9 79.1h41.6c39.6 0 57 28.3 57 53.6 0 27.5-21.5 53.6-56.8 53.6h-41.8V79.1zm15.4 93.3h24.5c34.9 0 42.9-26.5 42.9-39.7C191.7 111.2 178 93 148 93h-23.7v79.4zM88.7 56.8c0 5.5-4.5 10.1-10.1 10.1s-10.1-4.6-10.1-10.1c0-5.6 4.5-10.1 10.1-10.1s10.1 4.6 10.1 10.1z"></path>
</svg></a> (<a class="p-org org h-org" href="https://www.w3.org">W3C</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="130027">
    <span class="p-name fn">Dan Lazin</span> (<a class="p-org org h-org" href="https://www.google.com">Google LLC</a>)
  </dd>
        
        
        <dt>Feedback:</dt><dd>
        <a href="https://github.com/w3c/epub-tests/">GitHub w3c/epub-tests</a>
        (<a href="https://github.com/w3c/epub-tests/pulls/">pull requests</a>,
        <a href="https://github.com/w3c/epub-tests/issues/new/choose">new issue</a>,
        <a href="https://github.com/w3c/epub-tests/issues/">open issues</a>)
      </dd><dd><a href="mailto:public-epub3@w3.org?subject=%5Bepub-tests%5D%20YOUR%20TOPIC%20HERE">public-epub3@w3.org</a> with subject line <kbd>[epub-tests] <em>… message topic …</em></kbd> (<a rel="discussion" href="https://lists.w3.org/Archives/Public/public-epub3">archives</a>)</dd>
        
        
      </dl>
    </details>
    
    
    <p class="copyright">
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    ©
    2021-2022
    
    <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
    <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>,
    <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
    <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>
		<section id="abstract" class="introductory"><h2 id="abstract-0">Abstract</h2><a class="self-link" href="#abstract" aria-label="Permalink for this Section"></a>
			<p>Description of the EPUB 3.3 tests.</p>
		</section>
		<section id="sotd" class="introductory"><h2 id="status-of-this-document">Status of This Document</h2><a class="self-link" href="#sotd" aria-label="Permalink for this Section"></a><p>
      This document is merely a <abbr title="World Wide Web Consortium">W3C</abbr>-internal
       document. It has no official standing
      of any kind and does not represent consensus of the <abbr title="World Wide Web Consortium">W3C</abbr> Membership.
    </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#sec-test-tables"><bdi class="secno">2. </bdi>Description of the Tests</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sec-publication-resources-data"><bdi class="secno">2.1 </bdi>Publication Resources</a></li><li class="tocline"><a class="tocxref" href="#sec-core-media types-data"><bdi class="secno">2.2 </bdi>Core Media Types</a></li><li class="tocline"><a class="tocxref" href="#sec-package-documents-data"><bdi class="secno">2.3 </bdi>Package Documents</a></li><li class="tocline"><a class="tocxref" href="#sec-internationalization-data"><bdi class="secno">2.4 </bdi>Internationalization</a></li><li class="tocline"><a class="tocxref" href="#sec-content-documents-data"><bdi class="secno">2.5 </bdi>Content Documents</a></li><li class="tocline"><a class="tocxref" href="#sec-scripting-data"><bdi class="secno">2.6 </bdi>Scripting</a></li><li class="tocline"><a class="tocxref" href="#sec-navigation-documents-data"><bdi class="secno">2.7 </bdi>Navigation Documents</a></li><li class="tocline"><a class="tocxref" href="#sec-fixed-layout-data"><bdi class="secno">2.8 </bdi>Fixed Layout</a></li><li class="tocline"><a class="tocxref" href="#sec-open-container format-data"><bdi class="secno">2.9 </bdi>Open Container Format</a></li></ol></li><li class="tocline"><a class="tocxref" href="#contributors"><bdi class="secno">A. </bdi>Acknowledgements</a></li></ol></nav>

		<section id="introduction"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
			

			<p>
				<a href="https://github.com/w3c/epub-tests">w3c/epub-tests</a> is the repository for the the tests to
				validate the implementability of <abbr title="World Wide Web Consortium">W3C</abbr>'s EPUB&nbsp;3.3 specifications, specifically the core 
				<a href="https://www.w3.org/TR/epub-33/">EPUB 3.3</a> (the specification for the EPUB format itself) and the
				<a href="https://www.w3.org/TR/epub-rs-33/">EPUB Reading Systems&nbsp;3.3</a> (the specification for applications
				that read and render EPUB files).
			</p>

			<p>
				The development of the tests is a community effort (see the <a href="#contributors">list of
				contributors</a>). Everyone is welcome to contribute tests; please read the separate
				<a href="contributing">contribution guidelines</a> if you are interested.
			</p>

			<p>This document provides a short overview for each test, grouped into separate tables by test categories. The
			columns in the tables are as follows:</p>
			<ol>
				<li>The identification of each test, linked to the unzipped tests themselves in the GitHub repository.</li>
				<li>Conformance flag of test (i.e., <code>must</code>, <code>should</code>, or <code>may</code>).</li>
				<li>Title of the test.</li>
				<li>Short description of the test.</li>
				<li>References to the corresponding normative statements or sections in the EPUB 3.3 specification(s).</li>
				<li>Pointer to the (consolidated) implementation status of the test in the separate <a href="results">implementation report</a>.</li>
			</ol>
		</section>

		<section id="sec-test-tables"><h2 id="x2-description-of-the-tests"><bdi class="secno">2. </bdi>Description of the Tests</h2><a class="self-link" href="#sec-test-tables" aria-label="Permalink for Section 2."></a><section id="publication-resources"><h3 id="sec-publication-resources-data"><bdi class="secno">2.1 </bdi>Publication Resources</h3><a class="self-link" href="#sec-publication-resources-data" aria-label="Permalink for Section 2.1"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="pub-data-urls_browsing-context"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-data-urls_browsing-context">pub-data-urls_browsing-context</a></td><td>must</td><td>Data URL does not open in top-level context</td><td>The XHTML content contains an img element where the src attribute is given as a data URL. The reading system must display the image rather than opening it in a new top-level browsing context.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-data-urls"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/core/#sec-data-urls"> (2)</a></td><td><a href="results.html#pub-data-urls_browsing-context-results">❐</a></td></tr><tr><td class="must" id="pub-data-urls_top-level-content"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-data-urls_top-level-content">pub-data-urls_top-level-content</a></td><td>must</td><td>Data URL not opening as a top-level content document</td><td>The reading system must display an img (where src is a data URL) positioned at the bottom of the first page of a fixed layout ebook rather than opening the data URL as thought it were its own top-level content document.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-data-urls"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/core/#sec-data-urls"> (2)</a></td><td><a href="results.html#pub-data-urls_top-level-content-results">❐</a></td></tr><tr><td class="must" id="pub-foreign_bad-fallback"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-foreign_bad-fallback">pub-foreign_bad-fallback</a></td><td>must</td><td>Manifest fallback with unsupported fallback</td><td>This is a test of manifest fallbacks where both the spine item and the fallback are likely to be unsupported. The spine item is a DMG, with a fallback to a PSD file.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-foreign"> (1)</a></td><td><a href="results.html#pub-foreign_bad-fallback-results">❐</a></td></tr><tr><td class="must" id="pub-foreign_image"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-foreign_image">pub-foreign_image</a></td><td>must</td><td>Manifest fallback with image</td><td>An HTML content file contains a PSD image, with a manifest fallback to a PNG image. This tests fallbacks for resources that are not in the spine.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-foreign"> (1)</a></td><td><a href="results.html#pub-foreign_image-results">❐</a></td></tr><tr><td class="must" id="pub-foreign_json-spine"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-foreign_json-spine">pub-foreign_json-spine</a></td><td>must</td><td>Manifest fallback With JSON content document in spine</td><td>This EPUB uses a JSON content file in the spine, with a manifest fallback to an HTML document. If the reading system does not support JSON, it should display the HTML.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-foreign"> (1)</a></td><td><a href="results.html#pub-foreign_json-spine-results">❐</a></td></tr><tr><td class="must" id="pub-foreign_xml-spine"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-foreign_xml-spine">pub-foreign_xml-spine</a></td><td>must</td><td>Manifest fallback with XML in spine</td><td>This EPUB uses an ordinary XML content file with mimetype application/xml in the spine, with a manifest fallback to an HTML document. If the reading system does not support XML, it should display the HTML.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-foreign"> (1)</a></td><td><a href="results.html#pub-foreign_xml-spine-results">❐</a></td></tr><tr><td class="must" id="pub-foreign_xml-suffix-spine"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-foreign_xml-suffix-spine">pub-foreign_xml-suffix-spine</a></td><td>must</td><td>Manifest fallback with XML with suffix in spine</td><td>This EPUB uses an custom XML content file with mimetype application/dtc+xml in the spine, with a manifest fallback to an HTML document. If the reading system does not support XML, it should display the HTML.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-foreign"> (1)</a></td><td><a href="results.html#pub-foreign_xml-suffix-spine-results">❐</a></td></tr><tr><td class="must" id="pub-xml-external-id"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-xml-external-id">pub-xml-external-id</a></td><td>must</td><td>XML external entity not resolved</td><td>The XHTML content document contains a reference to an external entity. The reading system must not resolve it.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-xml-extid"> (1)</a></td><td><a href="results.html#pub-xml-external-id-results">❐</a></td></tr><tr><td class="must" id="pub-xml-names"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-xml-names">pub-xml-names</a></td><td>must</td><td>Invalid XML element name</td><td>An XHTML element has an invalid name with two successive colons. The reading system must produce an error.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-xml-ns"> (1)</a></td><td><a href="results.html#pub-xml-names-results">❐</a></td></tr><tr><td class="must" id="pub-xml-non-validating_invalid"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-xml-non-validating_invalid">pub-xml-non-validating_invalid</a></td><td>must</td><td>Invalid XML navigation document</td><td>The spine XML is invalid. The reading system must not display the navigation document.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-xml-nval"> (1)</a></td><td><a href="results.html#pub-xml-non-validating_invalid-results">❐</a></td></tr><tr><td class="must" id="pub-xml-non-validating_unclosed"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-xml-non-validating_unclosed">pub-xml-non-validating_unclosed</a></td><td>must</td><td>Unclosed XML tag</td><td>An XHTML element does not have a closing tag. The reading system must produce an error.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-xml-nval"> (1)</a></td><td><a href="results.html#pub-xml-non-validating_unclosed-results">❐</a></td></tr></tbody></table></section><section id="core-media-types"><h3 id="sec-core-media types-data"><bdi class="secno">2.2 </bdi>Core Media Types</h3><a class="self-link" href="#sec-core-media types-data" aria-label="Permalink for Section 2.2"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="pub-cmt-gif"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-cmt-gif">pub-cmt-gif</a></td><td>must</td><td>GIF image</td><td>A GIF image is displayed as part of the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#cmt-gif"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-images"> (2)</a></td><td><a href="results.html#pub-cmt-gif-results">❐</a></td></tr><tr><td class="must" id="pub-cmt-jpeg"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-cmt-jpeg">pub-cmt-jpeg</a></td><td>must</td><td>JPEG image</td><td>A JPEG image is displayed as part of the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#cmt-jpeg"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-images"> (2)</a></td><td><a href="results.html#pub-cmt-jpeg-results">❐</a></td></tr><tr><td class="must" id="pub-cmt-mp3"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-cmt-mp3">pub-cmt-mp3</a></td><td>must</td><td>MP3 audio</td><td>An MP3 audio file is displayed as part of the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#cmt-mp3"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-mp3-aac"> (2)</a></td><td><a href="results.html#pub-cmt-mp3-results">❐</a></td></tr><tr><td class="must" id="pub-cmt-mp4"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-cmt-mp4">pub-cmt-mp4</a></td><td>must</td><td>MP4 audio</td><td>An MP4 audio file is displayed as part of the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#cmt-cmt-mp4-aac"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-mp3-aac"> (2)</a></td><td><a href="results.html#pub-cmt-mp4-results">❐</a></td></tr><tr><td class="must" id="pub-cmt-opus"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-cmt-opus">pub-cmt-opus</a></td><td>must</td><td>OPUS audio</td><td>An OPUS audio file is displayed as part of the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#cmt-ogg-opus"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-mp3-aac"> (2)</a></td><td><a href="results.html#pub-cmt-opus-results">❐</a></td></tr><tr><td class="must" id="pub-cmt-png"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-cmt-png">pub-cmt-png</a></td><td>must</td><td>PNG image</td><td>A PNG image is displayed as part of the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#cmt-png"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-images"> (2)</a></td><td><a href="results.html#pub-cmt-png-results">❐</a></td></tr><tr><td class="must" id="pub-cmt-svg"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-cmt-svg">pub-cmt-svg</a></td><td>must</td><td>SVG image</td><td>An SVG image is displayed as part of the XHTML content (as a reference, not embedded).</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#cmt-svg"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-images"> (2)</a></td><td><a href="results.html#pub-cmt-svg-results">❐</a></td></tr><tr><td class="must" id="pub-cmt-webp"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pub-cmt-webp">pub-cmt-webp</a></td><td>must</td><td>WEBP image</td><td>A WEBP image is displayed as part of the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#cmt-webp"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-images"> (2)</a></td><td><a href="results.html#pub-cmt-webp-results">❐</a></td></tr></tbody></table></section><section id="package-documents"><h3 id="sec-package-documents-data"><bdi class="secno">2.3 </bdi>Package Documents</h3><a class="self-link" href="#sec-package-documents-data" aria-label="Permalink for Section 2.3"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="pkg-collections-unknown"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-collections-unknown">pkg-collections-unknown</a></td><td>must</td><td>Collection with unknown role</td><td>The package document contains a collection with an unknown role. The reading system must open the EPUB successfully.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-pkg-collections-unknown"> (1)</a></td><td><a href="results.html#pkg-collections-unknown-results">❐</a></td></tr><tr><td class="must" id="pkg-creator-order"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-creator-order">pkg-creator-order</a></td><td>must</td><td>Creators listed in order</td><td>Several creators are listed in the package document. The reading system must not display them out of order (but it may display only the first).</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-pkg-creator-order"> (1)</a></td><td><a href="results.html#pkg-creator-order-results">❐</a></td></tr><tr><td class="must" id="pkg-linked-records"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-linked-records">pkg-linked-records</a></td><td>must</td><td>Package processed with linked metadata record</td><td>Reading System must process and display the title and creator metadata from the package document. An ONIX 3.0 format linked metadata record exists, but contains neither title nor creator metadata.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#sec-linked-records"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/core/#sec-linked-records"> (2)</a></td><td><a href="results.html#pkg-linked-records-results">❐</a></td></tr><tr><td class="must" id="pkg-manifest-unknown"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-manifest-unknown">pkg-manifest-unknown</a></td><td>must</td><td>Manifest item with unknown properties</td><td>The package document contains a manifest item with unknown properties. The reading system must open the EPUB successfully.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-pkg-manifest-unknown"> (1)</a></td><td><a href="results.html#pkg-manifest-unknown-results">❐</a></td></tr><tr><td class="must" id="pkg-manifest-url"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-manifest-url">pkg-manifest-url</a></td><td>must</td><td>Content in arbitrary directory</td><td>The manifest refers to an XHTML file in an arbitrary subfolder. The reading system must be able to find the content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#confreq-root-url"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub-pub"> (2)</a></td><td><a href="results.html#pkg-manifest-url-results">❐</a></td></tr><tr><td class="must" id="pkg-meta-unknown"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-meta-unknown">pkg-meta-unknown</a></td><td>must</td><td>Meta tag with unknown property</td><td>The package document contains a meta tag with an unknown property. The reading system must open the EPUB successfully.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-pkg-meta-unknown"> (1)</a></td><td><a href="results.html#pkg-meta-unknown-results">❐</a></td></tr><tr><td class="must" id="pkg-meta-whitespace"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-meta-whitespace">pkg-meta-whitespace</a></td><td>must</td><td>Whitespace removed from package metadata</td><td>The package document's title and creator contain leading and trailing spaces along with excess internal whitespace. The reading system must render only a single space in all cases.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-pkg-whitespace"> (1)</a></td><td><a href="results.html#pkg-meta-whitespace-results">❐</a></td></tr><tr><td class="must" id="pkg-relative-url"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-relative-url">pkg-relative-url</a></td><td>must</td><td>Content in relative subdirectory</td><td>The manifest refers to an XHTML file in an arbitrary subfolder that is relative to the package's own arbitrary folder. The reading system must be able to find the content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#confreq-root-url"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub-pub"> (2)</a></td><td><a href="results.html#pkg-relative-url-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-duplicate-item-hyperlink"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-duplicate-item-hyperlink">pkg-spine-duplicate-item-hyperlink</a></td><td>must</td><td>Hyperlink to duplicate items in spine</td><td>The spine contains several references to the same content document. The reading system must move to the position of the first duplicate in the reading order when following a hyperlink.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-duplicate-item-hyperlink"> (1)</a></td><td><a href="results.html#pkg-spine-duplicate-item-hyperlink-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-duplicate-item-rendering"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-duplicate-item-rendering">pkg-spine-duplicate-item-rendering</a></td><td>must</td><td>Duplicate items in spine render</td><td>The spine contains several references to the same content document. The reading system must not skip the duplicates when rendering the reading order.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-duplicate-item-rendering"> (1)</a></td><td><a href="results.html#pkg-spine-duplicate-item-rendering-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-duplicate-item-ui"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-duplicate-item-ui">pkg-spine-duplicate-item-ui</a></td><td>must</td><td>UI recognizes duplicate items in spine</td><td>The spine contains several references to the same content document. The reading system must allow the duplicates to be independently bookmarked or otherwise recognized in the UI.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-duplicate-item-ui"> (1)</a></td><td><a href="results.html#pkg-spine-duplicate-item-ui-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-nonlinear-activation"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-nonlinear-activation">pkg-spine-nonlinear-activation</a></td><td>must</td><td>Non-linear spine item is reachable</td><td>An itemref in the spine is marked as non-linear. Although it (possibly) cannot be accessed through the table of contents, it can be reached from a link in the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#confreq-spine-nonlinear"> (1)</a></td><td><a href="results.html#pkg-spine-nonlinear-activation-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-order"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-order">pkg-spine-order</a></td><td>must</td><td>Spine items in order</td><td>Basic test of whether a reading system can display spine items in the correct order. The test fails if the reading system presents content in the order in which the file names sort, or if it presents files in manifest order rather than spine order.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#sec-pkg-doc-spine"> (1)</a></td><td><a href="results.html#pkg-spine-order-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-order-svg"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-order-svg">pkg-spine-order-svg</a></td><td>must</td><td>SVG spine items in order</td><td>Basic test of whether a reading system can display SVG spine items in the correct order.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-spine-order"> (1)</a></td><td><a href="results.html#pkg-spine-order-svg-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-unknown"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-unknown">pkg-spine-unknown</a></td><td>must</td><td>Spine item with unknown properties</td><td>The package document contains a spine item with unknown properties. The reading system must open the EPUB successfully.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-pkg-spine-unknown"> (1)</a></td><td><a href="results.html#pkg-spine-unknown-results">❐</a></td></tr><tr><td class="must" id="pkg-title-order"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-title-order">pkg-title-order</a></td><td>must</td><td>First title in package</td><td>Several titles are listed in the package document. The reading system must use the first title (and whether to use other titles is not defined).</td><td><a href="https://www.w3.org/TR/epub-33-rs/#title-order"> (1)</a></td><td><a href="results.html#pkg-title-order-results">❐</a></td></tr><tr><td class="must" id="pkg-unique-id"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-unique-id">pkg-unique-id</a></td><td>must</td><td>Unique identifier not unique</td><td>The package document's dc:identifier is identical across two publications. The reading system should display both publications independently.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-pkg-unique-id"> (1)</a></td><td><a href="results.html#pkg-unique-id-results">❐</a></td></tr><tr><td class="must" id="pkg-unique-id"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-unique-id">pkg-unique-id</a></td><td>must</td><td>Unique identifier reused</td><td>The package document's dc:identifier is identical across two publications. The reading system should display both publications independently.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-pkg-unique-id"> (1)</a></td><td><a href="results.html#pkg-unique-id-results">❐</a></td></tr><tr><td class="must" id="pkg-version-backward"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-version-backward">pkg-version-backward</a></td><td>must</td><td>Package version less than 3.0</td><td>“Reading Systems <em class="rfc2119">MUST</em> attempt to process an EPUB Publication whose Package Document version attribute is less than "3.0"”. This is an EPUB with package version attribute set to "0", to see if a reading system will open it.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-backward-epub"> (1)</a></td><td><a href="results.html#pkg-version-backward-results">❐</a></td></tr><tr><td class="should" id="pkg-flow-paginated"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-flow-paginated">pkg-flow-paginated</a></td><td>should</td><td>rendition:flow set to paginated</td><td>Tests on handling overflow content with the "rendition:flow" property set to "paginated". The content should be dynamically paginated (i.e., not scrolled) by the reading system.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#paginated"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#paginated"> (2)</a></td><td><a href="results.html#pkg-flow-paginated-results">❐</a></td></tr><tr><td class="should" id="pkg-flow-scrolled-continuous"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-flow-scrolled-continuous">pkg-flow-scrolled-continuous</a></td><td>should</td><td>rendition:flow set to scrolled-continuous</td><td>Tests on handling overflow content with the "rendition:flow" property set to "scrolled-continuous". The content should be presented as one continuous scrolling document (i.e., not paginated).</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#scrolled-continuous"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#scrolled-continuous"> (2)</a></td><td><a href="results.html#pkg-flow-scrolled-continuous-results">❐</a></td></tr><tr><td class="should" id="pkg-flow-scrolled-doc"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-flow-scrolled-doc">pkg-flow-scrolled-doc</a></td><td>should</td><td>rendition:flow set to scrolled-doc</td><td>Tests on handling overflow content with the "rendition:flow" property set to "scrolled-doc". Each of the chapters in this publication should be vertically scrollable, and swiping horizontally should moves from one to the next.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#scrolled-doc"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#scrolled-doc"> (2)</a></td><td><a href="results.html#pkg-flow-scrolled-doc-results">❐</a></td></tr><tr><td class="should" id="pkg-manifest-unlisted-resource"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-manifest-unlisted-resource">pkg-manifest-unlisted-resource</a></td><td>should</td><td>Resource not listed in manifest</td><td>The XHTML content references an image that does not appear in the manifest. The image should not be shown.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rendition-rs-manifest"> (1)</a></td><td><a href="results.html#pkg-manifest-unlisted-resource-results">❐</a></td></tr></tbody></table></section><section id="internationalization"><h3 id="sec-internationalization-data"><bdi class="secno">2.4 </bdi>Internationalization</h3><a class="self-link" href="#sec-internationalization-data" aria-label="Permalink for Section 2.4"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="pgk-lang_pkg_non_content"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pgk-lang_pkg_non_content">pgk-lang_pkg_non_content</a></td><td>must</td><td>Content document must not inherit package language settings</td><td>The package document's language is set to 'fr' but the content document is not annotated for language. The content document should not become automatically 'fr' but should be the default 'en'.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-lang-no-content"> (1)</a></td><td><a href="results.html#pgk-lang_pkg_non_content-results">❐</a></td></tr><tr><td class="must" id="pgk-lang_pkg_non_content_dir"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pgk-lang_pkg_non_content_dir">pgk-lang_pkg_non_content_dir</a></td><td>must</td><td>Content document must not inherit package dir settings</td><td>The package document's language is set to 'he' and direction 'rtl' but the content document is not annotated for language and direction. The content document should not become automatically 'he' and 'rtl'.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-lang-no-content"> (1)</a></td><td><a href="results.html#pgk-lang_pkg_non_content_dir-results">❐</a></td></tr><tr><td class="must" id="pkg-dir-auto_root-rtl"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-dir-auto_root-rtl">pkg-dir-auto_root-rtl</a></td><td>must</td><td>Correct 'dir=rtl' on the package, incorrectly overwritten by 'dir=auto' on title</td><td>The 'dc:title' element contains text whose proper rendering requires bidi control. The element's 'dir' attribute is set to 'auto' and the 'dir' attribute is set to 'rtl' on the package element; the title should display incorrectly.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#attrdef-dir"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-intro"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-auto"> (3)</a></td><td><a href="results.html#pkg-dir-auto_root-rtl-results">❐</a></td></tr><tr><td class="must" id="pkg-dir-auto_root-unset"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-dir-auto_root-unset">pkg-dir-auto_root-unset</a></td><td>must</td><td>Incorrect 'dir=auto' on the title</td><td>The 'dc:title' element contains text whose proper rendering requires bidi control. The element's 'dir' attribute is set to 'auto'; the title should display incorrectly.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#attrdef-dir"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-intro"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-auto"> (3)</a></td><td><a href="results.html#pkg-dir-auto_root-unset-results">❐</a></td></tr><tr><td class="must" id="pkg-dir_creator-rtl"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-dir_creator-rtl">pkg-dir_creator-rtl</a></td><td>must</td><td>'dir=rtl' on the creator</td><td>The 'dc:creator' element's 'dir' attribute is set to 'rtl'; the creator's name should display right-to-left.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#attrdef-dir"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-intro"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir"> (3)</a></td><td><a href="results.html#pkg-dir_creator-rtl-results">❐</a></td></tr><tr><td class="must" id="pkg-dir_rtl-root-ltr"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-dir_rtl-root-ltr">pkg-dir_rtl-root-ltr</a></td><td>must</td><td>Incorrect 'dir=ltr' on the package, correctly overwritten by 'dir=rtl' on title</td><td>The 'dc:title' element contains text whose proper rendering requires bidi control. The element's 'dir' attribute is set to 'rtl' and the 'dir' attribute is set to 'ltr' on the 'package' element; the title should display correctly.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#attrdef-dir"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-intro"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir"> (3)</a></td><td><a href="results.html#pkg-dir_rtl-root-ltr-results">❐</a></td></tr><tr><td class="must" id="pkg-dir_rtl-root-unset"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-dir_rtl-root-unset">pkg-dir_rtl-root-unset</a></td><td>must</td><td>Correct 'dir=rtl' on the title</td><td>The 'dc:title' element contains text whose proper rendering requires bidi control. The element's 'dir' attribute is set to 'rtl'; the title should display correctly.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#attrdef-dir"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-intro"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir"> (3)</a></td><td><a href="results.html#pkg-dir_rtl-root-unset-results">❐</a></td></tr><tr><td class="must" id="pkg-dir_unset-root-rtl"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-dir_unset-root-rtl">pkg-dir_unset-root-rtl</a></td><td>must</td><td>Correct 'dir=rtl' on the package</td><td>The 'dc:title' element contains text whose proper rendering requires bidi control. The root's 'dir' attribute is set to 'rtl'; the title should display correctly.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#attrdef-dir"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-intro"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir"> (3)</a></td><td><a href="results.html#pkg-dir_unset-root-rtl-results">❐</a></td></tr><tr><td class="must" id="pkg-dir_unset-root-unset"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-dir_unset-root-unset">pkg-dir_unset-root-unset</a></td><td>must</td><td>No 'dir' on the title</td><td>The 'dc:title' element contains text whose proper rendering requires bidi control. The element's 'dir' attribute is not set; the title should display incorrectly.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#attrdef-dir"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir-intro"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-pkg-dir"> (3)</a></td><td><a href="results.html#pkg-dir_unset-root-unset-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-progression-default"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-progression-default">pkg-spine-progression-default</a></td><td>must</td><td>RTL publication's spine has implicit 'page-progression-direction="default"'</td><td>In a publication set as using an RTL language, the spine does not set 'page-progression-direction', so it is implicitly 'default'. The pages must appear from right to left.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-spine-progression-default"> (1)</a></td><td><a href="results.html#pkg-spine-progression-default-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-progression-pre-paginated"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-progression-pre-paginated">pkg-spine-progression-pre-paginated</a></td><td>must</td><td>Pre-paginated publication's spine sets 'page-progression-direction="ltr"'</td><td>In a pre-paginated publication whose XHTML content sets 'dir="rtl"', the spine sets 'page-progression-direction="ltr"'. The pages must appear from left to right.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-spine-progression-prepaginated"> (1)</a></td><td><a href="results.html#pkg-spine-progression-pre-paginated-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-progression_ltr"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-progression_ltr">pkg-spine-progression_ltr</a></td><td>must</td><td>Spine sets 'page-progression-direction="ltr"'</td><td>The spine sets 'page-progression-direction="ltr"'. The pages must appear from left to right.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-spine-progression"> (1)</a></td><td><a href="results.html#pkg-spine-progression_ltr-results">❐</a></td></tr><tr><td class="must" id="pkg-spine-progression_rtl"><a href="https://github.com/w3c/epub-tests/tree/main/tests/pkg-spine-progression_rtl">pkg-spine-progression_rtl</a></td><td>must</td><td>Spine sets 'page-progression-direction="rtl"'</td><td>The spine sets 'page-progression-direction="rtl"'. The pages must appear from right to left.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-rs-spine-progression"> (1)</a></td><td><a href="results.html#pkg-spine-progression_rtl-results">❐</a></td></tr></tbody></table></section><section id="content-documents"><h3 id="sec-content-documents-data"><bdi class="secno">2.5 </bdi>Content Documents</h3><a class="self-link" href="#sec-content-documents-data" aria-label="Permalink for Section 2.5"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="cnt-css-support"><a href="https://github.com/w3c/epub-tests/tree/main/tests/cnt-css-support">cnt-css-support</a></td><td>must</td><td>Acid2 test</td><td>The Acid2 test, ported from acid2.acidtests.org, demonstrates broad CSS support.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-css-rs-support"> (1)</a></td><td><a href="results.html#cnt-css-support-results">❐</a></td></tr><tr><td class="must" id="cnt-mathml-support"><a href="https://github.com/w3c/epub-tests/tree/main/tests/cnt-mathml-support">cnt-mathml-support</a></td><td>must</td><td>Support for Presentation MathML</td><td>A Presentation MathML equation is displayed as part of the XHTML content.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-mathml-rs-behavior"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-mathml-rs-render"> (2)</a></td><td><a href="results.html#cnt-mathml-support-results">❐</a></td></tr><tr><td class="must" id="cnt-svg-css-inclusion"><a href="https://github.com/w3c/epub-tests/tree/main/tests/cnt-svg-css-inclusion">cnt-svg-css-inclusion</a></td><td>must</td><td>CSS applied to included SVG</td><td>CSS changes the color of an SVG image that is embedded in the XHTML content by inclusion.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-svg-rs-css-embed-inc"> (1)</a></td><td><a href="results.html#cnt-svg-css-inclusion-results">❐</a></td></tr><tr><td class="must" id="cnt-svg-css-reference"><a href="https://github.com/w3c/epub-tests/tree/main/tests/cnt-svg-css-reference">cnt-svg-css-reference</a></td><td>must</td><td>CSS not applied to referenced SVG</td><td>CSS does not change the color of an SVG image that is embedded in the XHTML content by reference.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-css-embed-ref"> (1)</a></td><td><a href="results.html#cnt-svg-css-reference-results">❐</a></td></tr><tr><td class="must" id="cnt-svg-embedded"><a href="https://github.com/w3c/epub-tests/tree/main/tests/cnt-svg-embedded">cnt-svg-embedded</a></td><td>must</td><td>SVG embedded in XHTML content</td><td>An SVG image is embedded in the XHTML content (as inline SVG).</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-svg-rs-embed"> (1)</a></td><td><a href="results.html#cnt-svg-embedded-results">❐</a></td></tr><tr><td class="must" id="cnt-svg-support"><a href="https://github.com/w3c/epub-tests/tree/main/tests/cnt-svg-support">cnt-svg-support</a></td><td>must</td><td>SVG content document</td><td>An SVG image is displayed as a content document (not as part of an XHTML file).</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-svg"> (1)</a></td><td><a href="results.html#cnt-svg-support-results">❐</a></td></tr><tr><td class="should" id="cnt-xhtml-support"><a href="https://github.com/w3c/epub-tests/tree/main/tests/cnt-xhtml-support">cnt-xhtml-support</a></td><td>should</td><td>XHTML content document</td><td>An XHTML file is displayed as a content document.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-epub3-xhtml"> (1)</a></td><td><a href="results.html#cnt-xhtml-support-results">❐</a></td></tr></tbody></table></section><section id="scripting"><h3 id="sec-scripting-data"><bdi class="secno">2.6 </bdi>Scripting</h3><a class="self-link" href="#sec-scripting-data" aria-label="Permalink for Section 2.6"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="scr-readingsystem-features"><a href="https://github.com/w3c/epub-tests/tree/main/tests/scr-readingsystem-features">scr-readingsystem-features</a></td><td>must</td><td>epubReadingSystem object features</td><td>Checks whether the reading system implements the required epubReadingSystem feature string queries.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem-features"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-scripted-readingsystem-object"> (3)</a></td><td><a href="results.html#scr-readingsystem-features-results">❐</a></td></tr><tr><td class="must" id="scr-readingsystem-support"><a href="https://github.com/w3c/epub-tests/tree/main/tests/scr-readingsystem-support">scr-readingsystem-support</a></td><td>must</td><td>epubReadingSystem object support</td><td>Checks whether the reading system implements the epubReadingSystem object.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem-properties"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-scripted-readingsystem-object"> (3)</a></td><td><a href="results.html#scr-readingsystem-support-results">❐</a></td></tr><tr><td class="must" id="scr-readingsystem-support_iframe"><a href="https://github.com/w3c/epub-tests/tree/main/tests/scr-readingsystem-support_iframe">scr-readingsystem-support_iframe</a></td><td>must</td><td>epubReadingSystem object support in an iframe</td><td>Checks whether the reading system implements the epubReadingSystem object in container-constrained document (e.g., an iframe).</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem-properties"> (2)</a></td><td><a href="results.html#scr-readingsystem-support_iframe-results">❐</a></td></tr><tr><td class="must" id="scr-readingsystem-support_iframe_svg"><a href="https://github.com/w3c/epub-tests/tree/main/tests/scr-readingsystem-support_iframe_svg">scr-readingsystem-support_iframe_svg</a></td><td>must</td><td>epubReadingSystem object support in an SVG within an iframe</td><td>Checks whether the reading system implements the epubReadingSystem object in container-constrained SVG document (e.g., an iframe).</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem-properties"> (2)</a></td><td><a href="results.html#scr-readingsystem-support_iframe_svg-results">❐</a></td></tr><tr><td class="must" id="scr-readingsystem-support_svg"><a href="https://github.com/w3c/epub-tests/tree/main/tests/scr-readingsystem-support_svg">scr-readingsystem-support_svg</a></td><td>must</td><td>epubReadingSystem object support in a spine-level SVG</td><td>Checks whether the reading system implements the epubReadingSystem object in a spine-level SVG document.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#scripting-req-readingsystem-properties"> (2)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-scripted-readingsystem-object"> (3)</a></td><td><a href="results.html#scr-readingsystem-support_svg-results">❐</a></td></tr><tr><td class="should" id="scr-support"><a href="https://github.com/w3c/epub-tests/tree/main/tests/scr-support">scr-support</a></td><td>should</td><td>Scripting support</td><td>Checks whether the reading system implements scripting in a spine-level document (i.e., whether a simple inline script is executed at all).</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-scripted"> (1)</a></td><td><a href="results.html#scr-support-results">❐</a></td></tr><tr><td class="should" id="scr-support_iframe"><a href="https://github.com/w3c/epub-tests/tree/main/tests/scr-support_iframe">scr-support_iframe</a></td><td>should</td><td>Support for container-constrained scripts</td><td>Checks whether the reading system implements container-constrained scripts (i.e., whether a simple inline script is executed at all in an iframe).</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-scripted"> (1)</a></td><td><a href="results.html#scr-support_iframe-results">❐</a></td></tr><tr><td class="should" id="scr-support_svg"><a href="https://github.com/w3c/epub-tests/tree/main/tests/scr-support_svg">scr-support_svg</a></td><td>should</td><td>Scripting support in spine-level SVG</td><td>Checks whether the reading system implements scripting in a spine-level SVG document (i.e., whether a simple inline script is executed at all).</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-scripted"> (1)</a></td><td><a href="results.html#scr-support_svg-results">❐</a></td></tr></tbody></table></section><section id="navigation-documents"><h3 id="sec-navigation-documents-data"><bdi class="secno">2.7 </bdi>Navigation Documents</h3><a class="self-link" href="#sec-navigation-documents-data" aria-label="Permalink for Section 2.7"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="nav-access"><a href="https://github.com/w3c/epub-tests/tree/main/tests/nav-access">nav-access</a></td><td>must</td><td>Single link in navigation can be accessed</td><td>The navigation document contains a single link and can be accessed through reading system controls.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-nav-toc-access"> (1)</a></td><td><a href="results.html#nav-access-results">❐</a></td></tr><tr><td class="must" id="nav-activation"><a href="https://github.com/w3c/epub-tests/tree/main/tests/nav-activation">nav-activation</a></td><td>must</td><td>Navigation relocates position while in spine</td><td>Activating a link in the navigation document relocates the reading position to the target of the link.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-nav-activation"> (1)</a></td><td><a href="results.html#nav-activation-results">❐</a></td></tr><tr><td class="must" id="nav-spine_in-spine"><a href="https://github.com/w3c/epub-tests/tree/main/tests/nav-spine_in-spine">nav-spine_in-spine</a></td><td>must</td><td>Navigation accessible while in spine</td><td>The navigation document is referenced in the spine and can be accessed through reading system controls.</td><td><a href="https://www.w3.org/TR/epub-33-rs/#confreq-nav-spine"> (1)</a></td><td><a href="results.html#nav-spine_in-spine-results">❐</a></td></tr><tr><td class="must" id="nav-spine_in-spine-no-list-style"><a href="https://github.com/w3c/epub-tests/tree/main/tests/nav-spine_in-spine-no-list-style">nav-spine_in-spine-no-list-style</a></td><td>must</td><td>TOC items ignore navigation list styling</td><td>The reading system's rendering of the navigation must not show numbering, disregarding the list-style-type declared in the navigation document.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-nav-ol-style"> (1)</a></td><td><a href="results.html#nav-spine_in-spine-no-list-style-results">❐</a></td></tr><tr><td class="must" id="nav-spine_not-in-spine"><a href="https://github.com/w3c/epub-tests/tree/main/tests/nav-spine_not-in-spine">nav-spine_not-in-spine</a></td><td>must</td><td>Navigation accessible while not in spine</td><td>The navigation document is not referenced in the spine, but can still be accessed through reading system controls.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-nav-spine"> (1)</a></td><td><a href="results.html#nav-spine_not-in-spine-results">❐</a></td></tr></tbody></table></section><section id="fixed-layout"><h3 id="sec-fixed-layout-data"><bdi class="secno">2.8 </bdi>Fixed Layout</h3><a class="self-link" href="#sec-fixed-layout-data" aria-label="Permalink for Section 2.8"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="fxl-layout-duplication"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-layout-duplication">fxl-layout-duplication</a></td><td>must</td><td>rendition:layout duplication</td><td>When rendition:layout is duplicated, EPUBCheck must return an error.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#fxl-layout-duplication"> (1)</a></td><td><a href="results.html#fxl-layout-duplication-results">❐</a></td></tr><tr><td class="must" id="fxl-layout-pre-paginated"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-layout-pre-paginated">fxl-layout-pre-paginated</a></td><td>must</td><td>rendition:layout pre-paginated spine order</td><td>When rendition:layout is pre-paginated, reading systems must display one page per spine item.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#def-layout-pre-paginated"> (1)</a></td><td><a href="results.html#fxl-layout-pre-paginated-results">❐</a></td></tr><tr><td class="must" id="fxl-layout-pre-paginated-spreads"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-layout-pre-paginated-spreads">fxl-layout-pre-paginated-spreads</a></td><td>must</td><td>rendition:layout pre-paginated spreads</td><td>When the layout is pre-paginated, pages are displayed with no gaps when in synthetic spreads.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-rs-fxl-prepaginated-spreads"> (1)</a></td><td><a href="results.html#fxl-layout-pre-paginated-spreads-results">❐</a></td></tr><tr><td class="must" id="fxl-orientation_default"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-orientation_default">fxl-orientation_default</a></td><td>must</td><td>rendition:orientation default</td><td>rendition:orientation is not specified. Therefore, it has the value "auto" and reading systems should display the EPUB in the orientation of the device.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#orientation"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/core/#orientation"> (2)</a></td><td><a href="results.html#fxl-orientation_default-results">❐</a></td></tr><tr><td class="must" id="fxl-orientation_duplication"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-orientation_duplication">fxl-orientation_duplication</a></td><td>must</td><td>rendition:orientation duplication</td><td>rendition:orientation is specified twice. EPUBCheck should produce an error.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#orientation"> (1)</a></td><td><a href="results.html#fxl-orientation_duplication-results">❐</a></td></tr><tr><td class="must" id="fxl-spread_default"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-spread_default">fxl-spread_default</a></td><td>must</td><td>rendition:spread default</td><td>The default value for rendition:spread should be "auto" if not specified. When rendition:spread is "auto", the reading system can choose to display spine items in a synthetic spread.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#fxl-spread-default"> (1)</a></td><td><a href="results.html#fxl-spread_default-results">❐</a></td></tr><tr><td class="must" id="fxl-spread_none"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-spread_none">fxl-spread_none</a></td><td>must</td><td>rendition:spread none</td><td>When rendition:spead is "none", spine items must not appear in synthetic spreads.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#def-spread-none"> (1)</a></td><td><a href="results.html#fxl-spread_none-results">❐</a></td></tr><tr><td class="must" id="fxl-xhtml-icb"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-xhtml-icb">fxl-xhtml-icb</a></td><td>must</td><td>XHTML content clipped outside viewport</td><td>XHTML content outside the initial containing block (ICB) is clipped.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#sec-fxl-icb-html"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#confreq-fxl-rs-xhtml-icb"> (2)</a></td><td><a href="results.html#fxl-xhtml-icb-results">❐</a></td></tr><tr><td class="must" id="page-layout-both-spread"><a href="https://github.com/w3c/epub-tests/tree/main/tests/page-layout-both-spread">page-layout-both-spread</a></td><td>must</td><td>page-layout-both spread</td><td>If a reflowable spine item has a page-spread-* value, it must be honored.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#property-layout-local"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#page-spread-flow"> (2)</a></td><td><a href="results.html#page-layout-both-spread-results">❐</a></td></tr><tr><td class="should" id="fxl-orientation-landscape"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-orientation-landscape">fxl-orientation-landscape</a></td><td>should</td><td>rendition:orientation landscape</td><td>rendition:orientation is landscape, Reading Systems should either display the content in landscape or inform the user it should be.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#orientation"> (1)</a></td><td><a href="results.html#fxl-orientation-landscape-results">❐</a></td></tr><tr><td class="should" id="fxl-page-spread-center"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-page-spread-center">fxl-page-spread-center</a></td><td>should</td><td>rendition:page-spread-center</td><td>When rendition:page-spread-center is applied to a spine item, the document should be displayed in the center of the screen and not in a synthetic spread.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#page-spread-center"> (1)</a></td><td><a href="results.html#fxl-page-spread-center-results">❐</a></td></tr><tr><td class="should" id="fxl-page-spread-combined"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-page-spread-combined">fxl-page-spread-combined</a></td><td>should</td><td>rendition:page-spread combined</td><td>When rendition:page-spread-right and -left are applied to adjacent spine items, they should be displayed in a synthetic spread.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#fxl-page-spread"> (1)</a></td><td><a href="results.html#fxl-page-spread-combined-results">❐</a></td></tr><tr><td class="should" id="fxl-page-spread-left"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-page-spread-left">fxl-page-spread-left</a></td><td>should</td><td>rendition:page-spread-left</td><td>When rendition:page-spread-left is applied to a spine item, it should be displayed on the left side of the synthetic spread.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#page-spread-left"> (1)</a></td><td><a href="results.html#fxl-page-spread-left-results">❐</a></td></tr><tr><td class="should" id="fxl-page-spread-right"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-page-spread-right">fxl-page-spread-right</a></td><td>should</td><td>rendition:page-spread-right</td><td>When rendition:page-spread-right is applied to a spine item, it should be displayed on the right side of the synthetic spread.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#page-spread-right"> (1)</a></td><td><a href="results.html#fxl-page-spread-right-results">❐</a></td></tr><tr><td class="should" id="fxl-spread-both"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-spread-both">fxl-spread-both</a></td><td>should</td><td>rendition:spread both</td><td>When rendition:spread is "both", the content should appear in a synthetic spread regardless of reading system orientation.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#def-spread-both"> (1)</a></td><td><a href="results.html#fxl-spread-both-results">❐</a></td></tr><tr><td class="should" id="fxl-spread_landscape"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-spread_landscape">fxl-spread_landscape</a></td><td>should</td><td>rendition:spread landscape</td><td>If rendition:spread is "landscape", synthetic spreads should be rendered only when the reading system is in landscape orientation.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#def-spread-landscape"> (1)</a></td><td><a href="results.html#fxl-spread_landscape-results">❐</a></td></tr><tr><td class="should" id="page-layout-both"><a href="https://github.com/w3c/epub-tests/tree/main/tests/page-layout-both">page-layout-both</a></td><td>should</td><td>page-layout-both</td><td>If a reflowable spine item follows a pre-paginated one, it should appear on the next page.</td><td><a href="https://w3c.github.io/epub-specs/epub33/core/#property-layout-local"> (1)</a><a href="https://w3c.github.io/epub-specs/epub33/rs/#page-layout-both"> (2)</a></td><td><a href="results.html#page-layout-both-results">❐</a></td></tr><tr><td class="may" id="fxl-spread-auto"><a href="https://github.com/w3c/epub-tests/tree/main/tests/fxl-spread-auto">fxl-spread-auto</a></td><td>may</td><td>rendition:spread auto</td><td>When rendition:spread is "auto", the reading system can choose to display spine items in a synthetic spread.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#def-spread-auto"> (1)</a></td><td><a href="results.html#fxl-spread-auto-results">❐</a></td></tr></tbody></table></section><section id="open-container-format"><h3 id="sec-open-container format-data"><bdi class="secno">2.9 </bdi>Open Container Format</h3><a class="self-link" href="#sec-open-container format-data" aria-label="Permalink for Section 2.9"></a><table class="zebra"><colgroup>
            <col class="col_id">
            <col class="col_req">
            <col class="col_title">
            <col>
            <col class="col_sref">
            <col class="col_tref">
        </colgroup><tbody><tr>
            <th>Id</th>
            <th>Req</th>
            <th>Title</th>
            <th>Description</th>
            <th>Specs</th>
            <th>Ref</th>
        </tr><tr><td class="must" id="ocf-package_arbitrary"><a href="https://github.com/w3c/epub-tests/tree/main/tests/ocf-package_arbitrary">ocf-package_arbitrary</a></td><td>must</td><td>Package in arbitrary directory</td><td>The EPUB contains three valid package files and three corresponding sets of content documents, but only one of the packages, in an unusual subdirectory, is referenced by the container.xml file. The reading system must use this package.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#container-default-rendition"> (1)</a></td><td><a href="results.html#ocf-package_arbitrary-results">❐</a></td></tr><tr><td class="must" id="ocf-package_multiple"><a href="https://github.com/w3c/epub-tests/tree/main/tests/ocf-package_multiple">ocf-package_multiple</a></td><td>must</td><td>Multiple packages in container file</td><td>The EPUB contains three valid package files and three corresponding sets of content documents, all referenced by the container.xml file. The reading system must use the first package.</td><td><a href="https://w3c.github.io/epub-specs/epub33/rs/#container-default-rendition"> (1)</a></td><td><a href="results.html#ocf-package_multiple-results">❐</a></td></tr></tbody></table></section></section>

		<section class="appendix" id="contributors"><h2 id="a-acknowledgements"><bdi class="secno">A. </bdi>Acknowledgements</h2><a class="self-link" href="#contributors" aria-label="Permalink for Appendix A."></a>
			

			<p>The following experts contributed to the test suite:</p>

			<ul><li>Dan Lazin</li><li>Dave Cramer</li><li>Ivan Herman</li><li>Matt Garrish</li><li>Matthew Chan</li><li>Wendy Reid</li></ul>	
		</section>

	

<p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>